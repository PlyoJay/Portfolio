<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>포트폴리오</title>
    <style>
        @font-face
            {
            font-family: 'ONE-Mobile-POP';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/ONE-Mobile-POP.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            }
        @font-face
            {
            font-family: 'EF_MACHO';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2206-01@1.0/EF_MACHO.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            }
        @font-face
            {
            font-family: 'GothicA1-Light';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2205@1.0/GothicA1-Light.woff2') format('woff2');
            font-weight: 300;
            font-style: normal;
            }
        @font-face
            {
            font-family: 'CBNUJIKJI';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2202@1.0/CBNUJIKJI.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            }

        body
            {
            margin: 0
            }

        #root
            {
            position: relative;
            }

        #intro
            {
            position: relative;
            width: 100%;
            height: 100vh;
            }

        #introGIF
            {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            }

        #intro2
            {
            position: relative;
            opacity: 0;
            top: 15%;
            width: 100%;
            height: 70%;
            background: white;
            z-index:5;
            overflow: hidden;
            }

        #Title
            {
            position: absolute;
            left: 30%;
            top: 0%;
            width: 40%;
            }

        #name
            {
            position: absolute;
            font-family: 'ONE-Mobile-POP';
            font-size: 25px;
            left: 115%;
            top: 40%;
            }

        #Trainer
            {
            position: absolute;
            width: 15%;
            bottom: 0%;
            left: 55%;
            z-index: 5;
            }

        .skills_img
            {
            position: absolute;
            width: 10%;
            bottom: 10%;
            z-index: 1;
            }

        #logo
            {
            position: fixed;
            top: 15px;
            left: 25px;
            width: 6%;
            height: 6%;
            background: none;
            text-align: center;
            padding: 5px;
            z-index: 999;
            }

        #nav_bar
            {
            position: fixed;
            top: 25px;
            right: 25px;
            width: 350px;
            height: 6%;
            background: white;
            border: 2px solid rgb(255, 0, 255);
            border-radius: 50px;
            box-shadow : 0px 1px 20px black;
            z-index: 500;
            opacity: 1;
            }

        #menu_wrap
            {
            display: inline-block;
            position: absolute;
            width: 100%;
            max-height: 100%;
            }

        ul
            {
            display: inline-block;
            list-style-type: none;
            margin: 0;
            padding: 5%;
            }

        ul li
            {
            float: left
            }

        .menus
            {
            display: block;
            text-align: center;
            font-size: 15px;
            font-weight: bold;
            width: 150px;
            }

        #menu_icon
            {
            position: fixed;
            display: inline-block;
            max-width: 100%;
            cursor: pointer;
            right: 45px;
            top: 35px;
            z-index: 510;
            }

        #bar1, #bar2, #bar3
            {
            width: 35px; height: 5px;
            background-color: #333;
            margin: 6px 0;
            transition: 0.4s;
            }

        .change #bar1
            {
            -webkit-transform: rotate(-45deg) translate(-9px, 6px);
            transform: rotate(-45deg) translate(-9px, 6px);
            }
        .change #bar2
            {
            opacity: 0;
            }
        .change #bar3
            {
            -webkit-transform: rotate(45deg) translate(-8px, -8px);
            transform: rotate(45deg) translate(-8px, -8px);
            }

        #sec1
            {
            position: relative;
            width: 100%;
            height: 100vh;
            background: rgb(200, 180, 255);
            overflow: hidden;
            }

        #card
            {
            position: absolute;
            width: 80%; height: 80%;
            top: 10%; left: 10%;
            background: white;
            border-radius: 25px;
            border: 3px solid rgb(100, 30, 30);
            border-bottom: 10px solid rgb(100, 30, 30);
            border-right: 8px solid rgb(100, 30, 30);
            background: rgb(225, 225, 225);
            box-shadow: 8px 10px 20px 0px rgba(0,0,0,0.9);
            overflow: hidden;
            }

        .lid
            {
            position: absolute;
            width: 40%; height: 80%;
            top: 10%; z-index: 10;
            border-top: 3px solid rgb(100, 30, 30);
            border-bottom: 10px solid rgb(100, 30, 30);
            background: rgb(220, 50, 50);
            }
        #leftLid
            {
            left: 10%; z-index:3;
            border-left: 3px solid rgb(100, 30, 30);
            border-right: .5px solid rgb(100, 30, 30);
            border-radius: 25px 0 0 25px;
            }
        #rightLid
            {
            right: 9.0%; z-index:1;
            width: 40.5%;
            border-left: .5px solid rgb(0, 0, 0);
            border-right: 10px solid rgb(100, 30, 30);
            border-radius: 0 25px 25px 0;
            }

        .Circle
            {
            position: absolute;
            height:250px; width: 125px;
            top: 35%;
            }
        #leftCir
            {
            width: 250px;
            right: -125px;
            background: yellow;
            border: 1px solid black;
            border-radius: 50%;
            box-shadow: inset 8px 10px 20px 5px rgba(0,0,0,0.9);
            }
        #rightCir
            {
            left:0;
            background: rgb(220, 50, 50);
            border-radius: 0 120px 120px 0;
            box-shadow: inset 0 10px 20px 0px rgba(0,0,0,0.9);
            }
        #openDex
            {
            display: block;
            font-family: 'ONE-Mobile-POP';
            font-size: 30px;
            width: 100%; line-height: 250px;
            text-align: center;
            opacity: 0;
            }
        #leftCir:hover
            {
            filter: brightness(50%)
            }
        #leftCir:active
            {
            filter: brightness(100%)
            }
        #leftCir:hover #openDex
            {
            opacity: 1;
            }

        #card_top
            {
            position: absolute;
            width: 100%;
            height: 12%;
            top:0;
            background: gray;
            font-size: 50px;
            }

        .card_text
            {
            position: absolute;
            margin: 20px;
            font-family: 'ONE-Mobile-POP';
            }

        #myPic
            {
            position: absolute;
            width: 15%; height: 35%;
            top: 15%; left: 5%;
            border: 1px solid black;
            border-radius: 10%;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.9) inset;
            background: white;
            overflow: hidden;
            }

        #Profile
            {
            width: 100%; height: 100%;
            }

        #info
            {
            position: absolute;
            width: 35%; height: 35%;
            top: 15%; left: 25%;
            border: 1px solid black;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.9) inset;
            background: rgb(180, 180, 180);
            text-align: center;
            }

        #canvas
            {
            position: absolute;
            top: 20%;
            left: 65%;
            border: 1px solid black;
            border-radius: 50%;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.9) inset;
            background: rgb(200, 200, 200);
            }

        .skills
            {
            position: absolute;
            display: inline-block;
            width: 250px; height: 250px;
            border: 3px solid black;
            border-radius: 50%;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.9) inset;
            background: white;
            }
        .skills:hover
            {
            filter: brightness(50%)
            }
        .skills:active
            {
            filter: brightness(80%)
            }

        .skillImg
            {
            max-width: 100%;
            max-height: 100%;
            }
        #PY
            {
            top: 55%; left: 5%;
            }
        #HTMLnCSS
            {
            top: 55%; left: 45%;
            }
        #JS
            {
            top: 55%; left: 25%;
            }
        #PYImg
            {
            width: 100%;
            }
        #HTMLImg
            {
            position: absolute;
            left: 5%;
            }

        #sec2
            {
            position: relative;
            width: 100%;
            height: 100vh;
            background: rgb(200, 180, 255);
            }

        #Joy-Con_L
            {
            position: relative;
            display: table;
            width: 10%; height: 75%;
            background: rgb(1, 187, 227);
            left: 4%; top: 12.5%;
            border: 10px solid rgb(26, 121, 147);
            border-radius: 100px 15px 15px 100px;
            box-shadow: 10px 10px 10px rgba(0,0,0,0.9);
            }
        #joystick
            {
            position: absolute;
            display: table-cell;
            text-align: center;
            vertical-align: middle;
            top: 10%;
            background: none;
            }
        #JCInst
            {
            position: absolute;
            display: block;
            width: 60%;
            top: 35%; left: 18%;
            border: 5px solid rgb(26, 121, 147);
            text-align: center;
            font-family: 'EF_MACHO'; font-size: 18px;
            }
        #JCArrows
            {
            position: absolute;
            display: block;
            width: 60%;
            top: 52.5%; left: 18%;
            border: 5px solid rgb(26, 121, 147);
            text-align: center;
            font-family: 'GothicA1-Light'; font-weight: bold;
            }
        #Joy-Con_R
            {
            position: absolute;
            display: table;
            width: 10%; height: 75%;
            background: rgb(255, 90, 85);
            left: 86.2%; top: 12.5%;
            border: 10px solid rgb(233, 50, 36);
            border-radius: 15px 100px 100px 15px;
            box-shadow: 10px 10px 10px rgba(0,0,0,0.9);
            padding: 0 auto;
            }
        #Joy-Con_R span
            {
            display: table-cell;
            vertical-align: middle;
            writing-mode: vertical-rl;
            line-height: 100%;
            font-size: 80px; font-family: 'EF_MACHO';
            text-align: center;
            }


        #switch_body
            {
            position: absolute;
            width: 70%; height: 75%;
            top: 12.5%; left: 15%;
            background: black;
            border-radius: 15px;
            border: 10px solid rgb(100, 100, 100);
            box-shadow: 10px 10px 10px rgba(0,0,0,0.9);
            }

        #myWorks
            {
            position: relative;
            overflow: hidden;
            width: 90%; height: 90%;
            top: 5%; left: 5%;
            border: 3px solid rgb(0, 100, 200);
            border-radius: 25px;
            background: rgb(120, 140, 255);
            box-shadow: inset 25px 25px 30px rgba(0,0,0,0.5);
            }

        .Works
            {
            position: absolute;
            width: 80%; height: 60%;
            background: rgb(40, 40, 100);
            border: 3px solid rgb(50, 100, 255);
            box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
            }
        .Projects
            {
            position: absolute;
            width: 45%; height:80%;
            left: 5%;top: 10%;
            background: white;
            }

        #footer
            {
            position: relative;
            display: table;
            width: 100%; height: 20vh;
            background: rgb(50, 50, 50);
            text-align: center;
            vertical-align: middle;
            font-size: 20px;
            }
        #footer span
            {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
            font-size: 20px;
            color: white;
            }

    </style>
</head>
<body>
<div id="root">
    <header id="intro">
        <img id="introGIF">
        <div id="intro2">
            <img src="" id="Title">
            <div id="name">KIM, HYUNGJUNE</div>
            <img src="https://ifh.cc/g/vlLpk7.webp" alt="레드" id="Trainer">
            <img class="skills_img" src="https://cdn-icons-png.flaticon.com/512/5968/5968350.png">
            <img class="skills_img" src="https://cdn-icons-png.flaticon.com/512/919/919827.png">
            <img class="skills_img" src="https://cdn-icons-png.flaticon.com/512/5968/5968242.png">
            <img class="skills_img" src="https://images.velog.io/images/yooniverse/post/7e4a5786-690e-43ce-ac74-275ddb47d123/%E3%85%93%E3%84%B4.png">
        </div>
    </header>
    <nav id="logo">
        <a href="#intro"><img src="https://ifh.cc/g/wjdq2G.png" alt="hi"></a>
    </nav>
    <nav id="nav_bar">
        <div id="menu_wrap">
            <ul>
                <li class="menu">
                    <a href="#sec1"><span class="menus">About Me</span></a>
                </li>
                <li class="menu">
                    <a href="#sec2"><span class="menus">My Works</span></a>
                </li>
            </ul>
        </div>
    </nav>
    <div id="menu_icon" onclick="menuIcon(this)">
        <div id="bar1"></div>
        <div id="bar2"></div>
        <div id="bar3"></div>
    </div>
    <section id="sec1">
        <div class="lid" id="leftLid">
            <div id="leftCir" class="Circle">
                <span id="openDex">
                    Press to Open
                </span>
            </div>
        </div>
        <div class="lid" id="rightLid">
            <div id="rightCir" class="Circle"></div>
        </div>
        <div id="card">
            <div id="card_top">
                <span class="card_text">
                    Profile & Skills
                </span>
                <span class="card_text" style="right: 0">
                    Trainer's Card
                </span>
            </div>
            <div id="myPic">
                <img id="Profile" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIHBg8SBw4PEhATDg0PFRAPEA8ODQ0RFREWFhURExYYKCggGBslHRUfITEhJSkrLi4uFx8zODMtNyg5OisBCgoKDg0OFw8QGjIlHSItNy0tKy4tKzctLy0tKzgtLS0tLSstLi0rNy0tLC0tKy0rOC0tKy03LS0rLTctKy0rN//AABEIAOAA4QMBIgACEQEDEQH/xAAaAAEAAgMBAAAAAAAAAAAAAAAABAUCAwYB/8QANhABAAECAgYIBAUFAQAAAAAAAAECAwQRBSExUWFxEhMiMkGRocEzcoGxNFJiotEUQoLh8SP/xAAZAQEBAQEBAQAAAAAAAAAAAAAAAwIBBAX/xAAdEQEBAQEAAgMBAAAAAAAAAAAAAQIRAzESIUET/9oADAMBAAIRAxEAPwDrAH0XzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAe00zVPZiZ5a26nB3KtlE/XKHOu8aBInBXI/s8piWmuiaJ7cTHOMjsOViA64AAAAAAAAAAAAAAAAAAAAAAJ+F0f0ozv6v0+P1Z6OwuURXcjX4Ru4rBLW/yK5x+1jbtxbjKiIjkyBNQeVUxVGVURMcXoCBidHRMZ2NU/l8J5KyqOjOVW10SHj8L1tHSojtR+6FM7/KnrH7FSAqkAAAAAAAAAAAAAAAAAANuEtddfiPDbPKGpYaIo7VU8oZ1eRrM7VlGqNQCC4AAAAACm0hZ6rETlsnXHujLTS1Gdqmd1WXnCrXzexDU5QBpkAAAAAAAAAAAAAAAAWeiPhVfNH2VifomvK5VG+Iny/wCs79N49rMBBYAAAAABE0p+F/ypVCz0tX2KaeOfkrFsekd+wBtgAAAAAAAAAAAAAAAAZ2LnU3YqjwnzhgDroaKorpiadkxm9VOAxfUz0bnd3/l/0tonONSGpxfN7ABl0AAJnKNYrdIYzOJotTzn2h2TrlvEXGXuvvzMbNkcmkF4hQB1wAAAAAAAAAAAAAAAAAASMNjKrGqNdO6fZHHLOuy8XNrHUXNs5Tun+UiKoq2TDniJy2MXxtzyOimctrRdxdFrbVE8I1ypJnPaH8y+RLxOOqvRlR2afWUQG5OMW9AHXAAAAAAAAAAAAAAAAAAAZ2bNV6rK3H8Qs8Po+m3rudqf2s3UjUzarLdmq7P/AJ0zP2Srejaqu/MR6ytYjKNQnd1SYiDToymO9VVPLKGcaOo/V5pY58q18YiTo6jj5sKtGUz3aqo55SnB8qfGKq5oyqO5MT6Si3bNVr4lMx9l+TGca3Zus3Ec6Le/o+m58Pszw2eSsv2KrFWVyPr4SpNSp3NjWA0yAAAAAAAAAAAAAAJGDwk4ic51U79/CHmDw/8AUXOEbZ9l1RTFFMRTGUQxrXPpTOe/by3bi1RlbjKGQIqgAAAAAAADG5RFynKuM4ZAKfGYObE5066fWOaK6GqOlTlVsU2Nw39PX2e7OzhwVzrv1UtZ59xHAUTAAAAAAAAAACmOlVEU7Z1Cbou10rs1TsjZzly3kdk7eLDDWYsWoiPrO+W0HnegAAAAAAAAAAAAYX7UXrUxV4+k72YDnrlE265irbE5PFhpWzlMVRyn2V70S9iFnKAOsgAAAAAAAC60fb6GFp46/NS7XQ0R0aIiPCIhPyVTxx6AkqAAAAAAAAAAAAAA1Yu31uHqjhn9YULo3P3aehdqjdVMeqvjqfkjEBRIAAAAAAABlajO7T80fd0Cgs/Gp+an7r9LyK+MATUAAAAAAAAAAAAAAFHjIyxVfzLxR438XXz9lPH7Y8nppAVRAAAAf//Z">
            </div>
            <div id="info">
                <br><span style="font-family: 'ONE-Mobile-POP'">학력</span><br>
                <span style="font-family: 'CBNUJIKJI'">
                    고등학교: 캐나다 유학<br>(12.09 ~ 15.05)<br>
                    미래융합교육원<br>
                    [빅데이터 UI & 프론트엔드 웹개발]비전공자과정<br>
                    (22.03 ~22.08)
                </span><br><br>
                <span style="font-family: 'ONE-Mobile-POP'">Contacts</span><br>
                <span style="font-family: 'CBNUJIKJI'">
                    연락처: 010 - 24XX - 87XX<br>
                    e-mail: hjjk615@naver.com<br>
                    카카오톡 ID: hjjk615<br>
                </span>
            </div>
            <canvas id="canvas"></canvas>
            <div class="skills" id="PY" onclick="drawChart(this)">
                <img id="PYImg" class="skillImg" src="https://ifh.cc/g/pAh8D4.png">
            </div>
            <div class="skills" id="JS" onclick="drawChart(this)">
                <img class="skillImg" src="https://ifh.cc/g/KYkw3B.png">
            </div>
            <div class="skills" id="HTMLnCSS" onclick="drawChart(this)">
                <img id="HTMLImg" class="skillImg" src="https://ifh.cc/g/GlYgQB.png">
            </div>
        </div>
    </section>
    <section id="sec2">
        <div id="Joy-Con_L">
            <canvas id="joystick"></canvas>
            <span id="JCInst">조이스틱을 움직여 오른쪽 화면을 조정하세요.</span>
            <span id="JCArrows">(↑ or →): <br>위로<br>(↓ or ←): <br>아래로</span>
        </div>
        <div id="switch_body">
            <div id="myWorks">
                <div class="Works">
                    <iframe class="Projects" src="" frameborder="1"></iframe>
                    <span></span>
                </div>
                <div class="Works">
                    <iframe class="Projects" src="" frameborder="1"></iframe>
                </div>
                <div class="Works">
                    <iframe class="Projects" src="" frameborder="1"></iframe>
                </div>
            </div>
        </div>
        <div id="Joy-Con_R">
            <span>PROJECTS</span>
        </div>
    </section>
    <footer id="footer">
        <span>
            본 페이지는 상업용 목적이 아닌 개인 포트폴리오 용으로 제작되었습니다.<br>
            @ 2022 Kim, Hyungjune. All Rights Reserved.
        </span>
    </footer>
</div>
<script>
    function isInViewport(element)
        {
        const rect = element.getBoundingClientRect();
        return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

    var main = document.getElementById("intro2")
    var cs = getComputedStyle(main);

    var t = document.getElementById("Title");
    var csT = getComputedStyle(t);

    function menuIcon(x)
        {
        x.classList.toggle("change")
        var bar = document.getElementById("nav_bar")
        var csBar = getComputedStyle(bar);
        var o = csBar.getPropertyValue("opacity");

        if(o == 1)
            {
            bar.style.opacity = 0;
            bar.style.border = "none";
            bar.style.width = 0;
            }
        else
            {
            bar.style.opacity = 1;
            bar.style.border = "2px solid red";
            bar.style.width = "350px";
            }
        bar.style.transition = "all 1s"
        }

    window.onload = function()
        {
        var intro = document.getElementById("introGIF");
        intro.src = "https://ifh.cc/g/pyvTk6.gif?v=" + new Date().valueOf();
        }

    var skillImg = document.getElementsByClassName("skills_img");
    var skillLeft = 40;

    for(i = 0; i < skillImg.length; i++)
        {
        var sI = getComputedStyle(skillImg[i]);
        var l = sI.getPropertyValue("left");
        skillImg[i].style.left = (skillLeft + (80 * i)) + "%";
        }

    let time = setTimeout(function()
        {
        main.style.opacity = 1;
        t.src = "https://ifh.cc/g/9Nyz4R.png"
        var interval = setInterval(function()
            {
            var titleT = csT.getPropertyValue("top");
            var tT = parseInt(titleT.replace("px", ""))
            var tTop = parseInt(t.style.top.replace("px", ""))
            t.style.top = (tT + 2) + "px";
            if(parseInt(t.style.top.replace("px", "")) >= 100)
                {
                clearInterval(interval);
                var name = document.getElementById("name");
                name.style.left = "45%";
                name.style.transition = "all 2s"
                clearTimeout(time);
                }
            }, 20)

        }, 4700)

    let time2 = setTimeout(function()
        {
        var interval2 = setInterval(function()
            {
            for(i = 0; i < skillImg.length; i++)
                {
                var left = parseInt(skillImg[i].style.left.replace("%", ""))
                skillImg[i].style.left = (left - 80) + "%";
                skillImg[i].style.transition = "all 2s";
                if(skillImg[i].style.left == "120%")
                    {
                    skillImg[i].style.opacity = 1;
                    }
                else if(skillImg[i].style.left == "-40%")
                    {
                    skillImg[i].style.opacity = 0;
                    }
                else if(skillImg[i].style.left == "-120%")
                    {
                    skillImg[i].style.left = "200%";
                    }
                }
            var h = isInViewport(main);
            if(h == false)
                {
                clearInterval(interval2)
                }
            }, 3000)
        }, 5100)


    var card = document.getElementById("card");
    var cd = getComputedStyle(card);
    var cardW = cd.getPropertyValue("width");

    var canvas = document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    canvas.width = cardW.replace("px", "") / 3;
    canvas.height = cardW.replace("px", "") / 3;



    function drawChart(obj)
        {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        var nextTime=0;
        var duration=1000;
        if(obj.id == "PY")
            {
            var endingPct = 80;
            }
        else if(obj.id == "JS")
            {
            var endingPct = 70;
            }
        else
            {
            var endingPct = 65;
            }

        var pct=0;
        var increment=duration/pct;
        requestAnimationFrame(animate);

        function animate(time)
            {
            draw(pct);
            pct++;
            if(pct <= endingPct)
                {
                requestAnimationFrame(animate);
                }
            }

        function draw(pct)
            {
            var endRadians=-Math.PI/2+Math.PI*2*pct/100;
            ctx.beginPath();
            ctx.arc(canvas.width/2,canvas.height/2,200,-Math.PI/2,endRadians);
            ctx.lineTo(canvas.width/2,canvas.height/2);
            ctx.fillStyle = 'rgb(255, 120, 170)';
            ctx.strokeStyle = "black";
            ctx.lineWidth = 3;
            ctx.stroke();
            ctx.fill();
            ctx.fillStyle = "black";
            ctx.textAlign='center';
            ctx.textBaseline='middle'
            ctx.font='30px ONE-Mobile-POP';
            var text = endingPct + "%";
            ctx.fillText(text, canvas.width/2, canvas.height/2);
            }
        }


    var lids = document.getElementsByClassName("lid");
    var cir = document.getElementById("leftCir");
    cir.onclick = function(e)
        {
        if(lids[0].style.left == "-38%" && lids[1].style.right == "-38%")
            {
            cir.childNodes[1].innerHTML = "Press to Open";
            lids[0].style.left = "10%";
            lids[0].style.transition = "all 4s";
            lids[1].style.right = "9%";
            lids[1].style.transition = "all 4s";
            }
        else
            {
            cir.childNodes[1].innerHTML = "Press to Close";
            lids[0].style.left = "-38%";
            lids[0].style.transition = "all 4s";
            lids[1].style.right = "-38%";
            lids[1].style.transition = "all 4s";
            }
        }



    var works = document.getElementsByClassName("Works");
    for(i = 0; i < works.length; i++)
        {
        works[i].style.top = -50 + (70 * i) + "%";
        works[i].style.left = 30 + (-20 * i) + "%";
        }

    var joy = document.getElementById("joystick");
    joy.width = 160;
    joy.height = 160;
    joy.addEventListener("mousedown", down);
    joy.addEventListener("mousemove", move);
    joy.addEventListener("mouseup", up);
    var ctx2 = joy.getContext("2d");
    ctx2.lineWidth = 10;
    clearBackground();
    drawCircle(80, 80, 40, "rgb(81,75,70)");
    var startX, startY, moveX, moveY;
    var joyPos = joy.getBoundingClientRect();
    var onTouch = false;
    function down(event)
        {
        try
            {
            startX = Math.round(event.touches[0].clientX - joyPos.left);
            startY = Math.round(event.touches[0].clientY - joyPos.top);
            }
        catch
            {
            startX = Math.round(event.clientX - joyPos.left);
            startY = Math.round(event.clientY - joyPos.top);
            }
        onTouch = true;
        }

    var moveMax = 40;
    var msgPrev = "s";
    var msg = "s";
    function move(event)
        {
        if (onTouch)
            {
            try
                {
                moveX = Math.round(event.touches[0].clientX - joyPos.left) - startX;
                moveY = Math.round(event.touches[0].clientY - joyPos.top) - startY;
                }
            catch
                {
                moveX = Math.round(event.clientX - joyPos.left) - startX;
                moveY = Math.round(event.clientY - joyPos.top) - startY;
                }

            if (moveX > moveMax) moveX = moveMax;
            else if (moveX < -moveMax) moveX = -moveMax;
            if (moveY > moveMax) moveY = moveMax;
            else if (moveY < -moveMax) moveY = -moveMax;

            clearBackground();
            drawCircle(80 + moveX, 80 + moveY, 40, "rgb(81,75,70)");

            if (moveX >= 40) msg = "d";
            else if (moveX <= -40) msg = "a";
            else if (moveY <= -40) msg = "w";
            else if (moveY >= 40) msg = "x";

            if (msg != msgPrev)
                {
                send(msg);
                function screenMove()
                    {
                    var works = document.getElementsByClassName("Works");
                    for(i = 0; i < works.length; i++)
                        {
                        let top = parseInt(works[i].style.top.replace("%", ""));
                        let left = parseInt(works[i].style.left.replace("%", ""))
                        works[i].style.transition = "top 3s, left 3s";
                        if(msg == "w" || msg == "d")
                            {
                            if(works[i].style.top == "-50%")
                                {
                                works[i].style.top = "90%";
                                works[i].style.left = "-10%"
                                works[i].style.zIndex = 0;
                                }
                            else if(works[i].style.top == "20%")
                                {
                                works[i].style.top = top - 70 + "%";
                                works[i].style.left = left + 20 + "%"
                                works[i].style.zIndex = 3;
                                }
                            else
                                {
                                works[i].style.top = top - 70 + "%";
                                works[i].style.left = left + 20 + "%"
                                works[i].style.zIndex = 5;
                                }
                            }
                        else if(msg == "x" || msg == "a")
                            {
                            if(works[i].style.top == "-50%")
                                {
                                works[i].style.top = top + 70 + "%";
                                works[i].style.left = left - 20 + "%"
                                works[i].style.zIndex = 5;
                                }
                            else if(works[i].style.top == "20%")
                                {
                                works[i].style.top = top + 70 + "%";
                                works[i].style.left = left - 20 + "%"
                                works[i].style.zIndex = 3;
                                }
                            else
                                {
                                works[i].style.top = "-50%";
                                works[i].style.left = "30%"
                                works[i].style.zIndex = 0;
                                }
                            }
                        else if(msg == "s")
                            {
                            clearInterval(JCInt)
                            }
                        }
                    }
                screenMove();
                let JCInt = setInterval(screenMove, 2500);
                msgPrev = msg;
                }
            }
        }

    function up()
        {
        clearBackground();
        drawCircle(80, 80, 40, "rgb(81,75,70)");
        msg = "s";
        msgPrev = "s";
        onTouch = false;
        send(msg);
        }

    function send(msg)
        {
        console.log(msg);
        }

    function clearBackground()
        {
        ctx2.clearRect(0, 0, joy.width, joy.height);
        ctx2.beginPath();
        ctx2.strokeStyle = "rgb(20,20,20)";
        ctx2.arc(80, 80, 55, 0, 2 * Math.PI);
        ctx2.stroke();
        }

    function drawCircle(x, y, r, c)
        {
        ctx2.beginPath();
        ctx2.fillStyle = c;
        ctx2.arc(x, y, r, 0, 2 * Math.PI);
        ctx2.fill();
        }


</script>
</body>
</html>